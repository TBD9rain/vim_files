#===================================================================================================
#
#   Target Code : SystemVerilog
#   Version     : 1.1.3
#
#   Description
#       UVM based test
#
#   Additional info
#       Get instruction with ":help UltiSnips".
#       Use "snippet" or "sn" to trigger snippet for snippet edition.
#
#   Author  : TBD9rain
#
#===================================================================================================

snippet "Test" "UVM Test" rb
class ${1:Test} extends uvm_test;

	\`uvm_component_utils($1)

	//  variable definition
	${2:Env}${3: #($4)} env;$0

	function new(string name="$1", uvm_component parent=null);
		super.new(name, parent);
	endfunction

	virtual function void build_phase(uvm_phase phase);
		super.build_phase(phase);

		env = $2$3::type_id::create("env", this);

		uvm_config_db #(uvm_object_wrapper)::set(this,
			"env.i_agt.sqr.main_phase",
			"default_sequence",
			${5:Sequence}${6: #($7)}::type_id::get());

		set_report_verbosity_level_hier(UVM_MEDIUM);
	endfunction

	virtual function void report_phase(uvm_phase phase);
		uvm_report_server rpt_ser;
		int err_num;

		super.report_phase(phase);
		rpt_ser = get_report_server();
		err_num = rpt_ser.get_severity_count(UVM_ERROR);

		if (err_num) begin
			$write("\n");
			$write("============\n");
			$write("Test failed.\n");
			$write("============\n");
			$write("\n");
		end
		else begin
			$write("\n");
			$write("============\n");
			$write("Test passed.\n");
			$write("============\n");
			$write("\n");
		end
	endfunction

	virtual function void final_phase (uvm_phase phase);
		super.final_phase(phase);

		$stop(2);
	endfunction
endclass
endsnippet


